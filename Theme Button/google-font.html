<body>
  <style>
    .theme-button {
      --size: 28px;
      --duration: 2s;
      --rotation: 90deg;
      --time-funtion: cubic-bezier(0.1, 0.38, 0.52, 1.28);

      --button-duration: calc(var(--duration) / 2);
      --delay: calc(var(--button-duration) - 0.8s);
      border: 1px solid;
      border-radius: 4px;

      position: relative;
      width: calc(var(--size) + 12px);
      aspect-ratio: 1;
      cursor: pointer;
      background: white;
      transition: all var(--button-duration) linear;
    }

    .theme-button::after,
    .theme-button::before {
      content: " ";
      aspect-ratio: 1;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .theme-button.dark-mode {
      background: black;
    }

    .theme-button::before {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 512 512'%0A%3E%3Cg%3E%3Cpath d='M512,256c0-15.383-52.216-25.45-55.1-39.992c-2.967-14.984,41.383-44.225,35.667-58.009 c-5.825-14.024-57.9-3.3-66.25-15.774c-8.4-12.559,21.358-56.592,10.708-67.242c-10.658-10.65-54.692,19.109-67.25,10.7 c-12.458-8.35-1.742-60.433-15.766-66.25c-13.792-5.716-43.025,38.634-58.017,35.667C281.45,52.216,271.384,0,256,0 c-15.383,0-25.45,52.216-39.992,55.1C201.025,58.067,171.784,13.716,158,19.433c-14.025,5.826-3.3,57.9-15.775,66.25 c-12.558,8.4-56.592-21.358-67.242-10.708c-10.65,10.659,19.109,54.692,10.7,67.25c-8.35,12.458-60.433,1.742-66.249,15.766 c-5.718,13.792,38.633,43.025,35.667,58.017C52.217,230.55,0,240.617,0,256s52.217,25.45,55.101,39.992 c2.966,14.984-41.384,44.225-35.667,58.009c5.825,14.024,57.899,3.3,66.249,15.774c8.4,12.559-21.358,56.592-10.708,67.242 c10.658,10.65,54.691-19.109,67.25-10.7c12.458,8.35,1.742,60.424,15.767,66.25c13.791,5.716,43.025-38.634,58.016-35.659 C230.55,459.784,240.617,512,256,512c15.384,0,25.45-52.216,39.992-55.092c14.984-2.975,44.226,41.376,58.009,35.659 c14.025-5.809,3.3-57.9,15.774-66.242c12.559-8.409,56.592,21.358,67.242,10.708c10.65-10.65-19.108-54.699-10.7-67.258 c8.35-12.458,60.426-1.742,66.25-15.766c5.716-13.792-38.634-43.025-35.658-58.017C459.784,281.45,512,271.383,512,256z M256,409.6 c-84.833,0-153.6-68.767-153.6-153.6S171.167,102.4,256,102.4S409.6,171.167,409.6,256S340.833,409.6,256,409.6z' fill='currentColor' /%3E%3C/g%3E%3C/svg%3E");
      width: var(--size);
      transform-origin: 0 0;
      rotate: calc(-1 * var(--rotation));
      transition: rotate var(--duration) var(--time-funtion) var(--delay);
    }

    .theme-button.dark-mode::before {
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 512 512'%0A%3E%3Cg%3E%3Cpath d='M512,256c0-15.383-52.216-25.45-55.1-39.992c-2.967-14.984,41.383-44.225,35.667-58.009 c-5.825-14.024-57.9-3.3-66.25-15.774c-8.4-12.559,21.358-56.592,10.708-67.242c-10.658-10.65-54.692,19.109-67.25,10.7 c-12.458-8.35-1.742-60.433-15.766-66.25c-13.792-5.716-43.025,38.634-58.017,35.667C281.45,52.216,271.384,0,256,0 c-15.383,0-25.45,52.216-39.992,55.1C201.025,58.067,171.784,13.716,158,19.433c-14.025,5.826-3.3,57.9-15.775,66.25 c-12.558,8.4-56.592-21.358-67.242-10.708c-10.65,10.659,19.109,54.692,10.7,67.25c-8.35,12.458-60.433,1.742-66.249,15.766 c-5.718,13.792,38.633,43.025,35.667,58.017C52.217,230.55,0,240.617,0,256s52.217,25.45,55.101,39.992 c2.966,14.984-41.384,44.225-35.667,58.009c5.825,14.024,57.899,3.3,66.249,15.774c8.4,12.559-21.358,56.592-10.708,67.242 c10.658,10.65,54.691-19.109,67.25-10.7c12.458,8.35,1.742,60.424,15.767,66.25c13.791,5.716,43.025-38.634,58.016-35.659 C230.55,459.784,240.617,512,256,512c15.384,0,25.45-52.216,39.992-55.092c14.984-2.975,44.226,41.376,58.009,35.659 c14.025-5.809,3.3-57.9,15.774-66.242c12.559-8.409,56.592,21.358,67.242,10.708c10.65-10.65-19.108-54.699-10.7-67.258 c8.35-12.458,60.426-1.742,66.25-15.766c5.716-13.792-38.634-43.025-35.658-58.017C459.784,281.45,512,271.383,512,256z M256,409.6 c-84.833,0-153.6-68.767-153.6-153.6S171.167,102.4,256,102.4S409.6,171.167,409.6,256S340.833,409.6,256,409.6z' fill='white' /%3E%3C/g%3E%3C/svg%3E");
      rotate: var(--rotation);
    }

    .theme-button::after {
      width: calc(0.4 * var(--size));
      background: black;
      border-radius: 50%;
      transition: left calc(var(--duration) / 10) linear var(--delay);
    }

    .theme-button.dark-mode::after {
      background: white;
      margin-right: 50%;
      left: calc(50% - 4px);
    }
  </style>

  <button class="theme-button"></button>

  <script>
    document
      .getElementsByClassName("theme-button")[0]
      .addEventListener("click", (e) => e.target.classList.toggle("dark-mode"));
  </script>
</body>
